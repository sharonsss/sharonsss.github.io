<!DOCTYPE html>
<html lang="en">





<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/apple-touch-icon.png">
  <link rel="icon" type="image/png" href="/img/avatar.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="description" content="">
  <meta name="author" content="San San">
  <meta name="keywords" content="">
  <title>ã€æ­Œå•æ¨èã€‘Node.js + Express æ­å»ºåç«¯æœåŠ¡å™¨ - Sansan&#39;s Blog</title>

  <link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"  >
<link rel="stylesheet" href="/lib/bootstrap/css/bootstrap.min.css"  >
<link rel="stylesheet" href="/lib/mdbootstrap/css/mdb.min.css"  >
<link rel="stylesheet" href="/lib/github-markdown/github-markdown.min.css"  >

<link rel="stylesheet" href="//at.alicdn.com/t/font_1067060_qzomjdt8bmp.css">



  <link rel="stylesheet" href="/lib/prettify/tomorrow-night-eighties.min.css"  >

<link rel="stylesheet" href="/css/main.css"  >


  <link rel="stylesheet" href="/lib/fancybox/jquery.fancybox.min.css"  >


<meta name="generator" content="Hexo 4.2.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>Sansan's Blog</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="/">Home</a>
          </li>
        
          
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="/archives/">Archives</a>
          </li>
        
          
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="/categories/">Categories</a>
          </li>
        
          
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="/tags/">Tags</a>
          </li>
        
          
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="/about/">About</a>
          </li>
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="view intro-2" id="background"
         style="background: url('/img/christopher1.jpg')no-repeat center center;
           background-size: cover;
           background-attachment: fixed;">
      <div class="full-bg-img">
        <div class="mask rgba-black-light flex-center">
          <div class="container text-center white-text fadeInUp">
            <span class="h2" id="subtitle">
              
            </span>

            
              <br>
              
                <p class="mt-3">
                  <i class="fas fa-calendar-alt" aria-hidden="true"></i>&nbsp;
                  Thursday, November 12th 2020, 2:08 pm
                </p>
              

              <p>
                
                  
                  &nbsp;<i class="far fa-chart-bar"></i>
                  <span class="post-count">
                    1.9k å­—
                  </span>&nbsp;
                

                
                  
                  &nbsp;<i class="far fa-clock"></i>
                  <span class="post-count">
                      8 min
                  </span>&nbsp;
                

                
                  <!-- ä¸è’œå­ç»Ÿè®¡æ–‡ç« PV -->
                  
                  &nbsp;<i class="far fa-eye" aria-hidden="true"></i>&nbsp;
                  <span id="busuanzi_container_page_pv">
                    <span id="busuanzi_value_page_pv"></span> times
                  </span>&nbsp;
                
              </p>
            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid">
  <div class="row">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-md">
      <div class="py-5 z-depth-3" id="board">
        <div class="post-content mx-auto" id="post">
          <div class="markdown-body">
            <blockquote>
<p>ä»é›¶å¼€å§‹ï¼Œåˆ©ç”¨ Vueã€Node.jsã€Expressã€MySQL å®ç°å‰åç«¯åˆ†ç¦»å¼€å‘ã€‚<br>èŠ±è´¹åŠå¤©æ—¶é—´æ­å»ºå®Œæˆï¼Œå°ç½‘ç«™æœ‰äº†å´›èµ·çš„åº•æ°”ã€‚</p>
</blockquote>
<a id="more"></a>

<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ç»è¿‡ç¬¬ä¸€æ­¥çš„<a href="https://sharonsss.github.io/2020/11/11/1111/" target="_blank" rel="noopener">æ•°æ®å‡†å¤‡</a>ï¼Œè®¾ç½®å¥½æœ¬åœ°æ•°æ®åº“åç§°ä¸ç«¯å£ä¹‹åï¼Œä¾¿å°†æ•°æ®æ•´ä½“å¯¼å…¥äº† MySQLã€‚æ•°æ®åº“æ–¹é¢çš„å‡†å¤‡å°±åšå¥½äº†ã€‚</p>
<p>ç¬¬äºŒæ­¥å°±æ˜¯æ­å»º<strong>åç«¯æœåŠ¡å™¨</strong>äº†ï¼Œç”¨ <strong>Node.js+Express</strong> æ¥å®ç°ã€‚</p>
<ul>
<li><p>ç›®æ ‡ï¼šåç«¯æœåŠ¡å™¨èƒ½å¤ŸæˆåŠŸå¯åŠ¨ï¼ŒæˆåŠŸè¿æ¥æ•°æ®åº“ï¼Œå¹¶èƒ½åœ¨å‰ç«¯æˆåŠŸè·å–æ•°æ®</p>
</li>
<li><p>å·¥ä½œæ—¶é•¿ï¼š0.5 å¤©</p>
</li>
</ul>
<h2 id="åˆ©ç”¨-Vue-CLIï¼Œåˆ›å»ºåŸºäº-Webpack-æ¨¡ç‰ˆçš„ä¸€ä¸ªåŸºæœ¬é¡¹ç›®ç»“æ„"><a href="#åˆ©ç”¨-Vue-CLIï¼Œåˆ›å»ºåŸºäº-Webpack-æ¨¡ç‰ˆçš„ä¸€ä¸ªåŸºæœ¬é¡¹ç›®ç»“æ„" class="headerlink" title="åˆ©ç”¨ Vue CLIï¼Œåˆ›å»ºåŸºäº Webpack æ¨¡ç‰ˆçš„ä¸€ä¸ªåŸºæœ¬é¡¹ç›®ç»“æ„"></a>åˆ©ç”¨ Vue CLIï¼Œåˆ›å»ºåŸºäº Webpack æ¨¡ç‰ˆçš„ä¸€ä¸ªåŸºæœ¬é¡¹ç›®ç»“æ„</h2><p>å¦‚ä½•ä½¿ç”¨ Vue-cli åˆ›å»ºæ–°é¡¹ç›®åœ¨ä¹‹å‰çš„æ–‡ç« é‡Œæœ‰å†™ï¼Œè¿™é‡Œç›´æ¥è®°å½•ä¸‹æ“ä½œï¼š</p>
<pre><code>ä½¿ç”¨@vue/cliä¹‹åï¼Œéœ€è¦å…¨å±€å®‰è£…cli-init
npm install -g @vue/cli-init

å†è¿è¡Œ
vue init webpack appname</code></pre><p>å›è½¦ä¹‹åï¼Œé€‰æ‹©é»˜è®¤çš„é¡¹ç›®ä¿¡æ¯ã€‚å¯ä»¥é€‰æ‹©è‡ªåŠ¨å®‰è£…ä¾èµ–ï¼Œè¿™æ ·å°±ä¸ç”¨è‡ªå·±å†æ‰‹åŠ¨å®‰è£…ã€‚</p>
<p>å®‰è£… <code>vue-resource</code>ï¼š</p>
<pre><code>npm install vue-resource --save</code></pre><p>å¯åŠ¨é¡¹ç›®ï¼ŒæŒ‰ç…§ <code>README</code> è¯´æ˜ï¼Œæ‰§è¡Œï¼š</p>
<pre><code>cd appname
npm run dev</code></pre><p>çœ‹åˆ°åˆå§‹åŒ–çš„é¡µé¢å¦‚ä¸‹ï¼Œé»˜è®¤ç«¯å£ä¸º <code>8080</code>ï¼š</p>
<p><img src="/img/vue_init.png" srcset="/img/loading.gif" alt="vueåˆå§‹åŒ–"></p>
<h2 id="Node-js-æ­å»ºåç«¯æœåŠ¡å™¨"><a href="#Node-js-æ­å»ºåç«¯æœåŠ¡å™¨" class="headerlink" title="Node.js æ­å»ºåç«¯æœåŠ¡å™¨"></a>Node.js æ­å»ºåç«¯æœåŠ¡å™¨</h2><h3 id="1-æ–°å»º-server-æ–‡ä»¶å¤¹"><a href="#1-æ–°å»º-server-æ–‡ä»¶å¤¹" class="headerlink" title="1. æ–°å»º server æ–‡ä»¶å¤¹"></a>1. æ–°å»º server æ–‡ä»¶å¤¹</h3><p>é¦–å…ˆï¼Œåœ¨åˆšåˆšåˆ›å»ºçš„é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œæ–°å»ºä¸€ä¸ª<code>server</code>æ–‡ä»¶å¤¹ï¼Œä½œä¸ºåç«¯æœåŠ¡å™¨çš„è·¯å¾„ã€‚</p>
<p><img src="/img/server_folder.jpg" srcset="/img/loading.gif" alt="server"></p>
<p><code>server</code> æ–‡ä»¶å¤¹å†…çš„ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code>|-- server
    |-- api
        |-- userApi.js
    |-- utils
        |-- DBHelper.js
    |-- index.js
    |-- sqlMap.js
    |-- package.json</code></pre><h3 id="2-åˆå§‹åŒ–-package-json"><a href="#2-åˆå§‹åŒ–-package-json" class="headerlink" title="2. åˆå§‹åŒ– package.json"></a>2. åˆå§‹åŒ– package.json</h3><p>åœ¨ <code>server</code> æ ¹ç›®å½•ä¸‹è¿è¡Œï¼š</p>
<pre><code>npm init -y</code></pre><p>ç”Ÿæˆé»˜è®¤çš„ <code>package.json</code> æ–‡ä»¶ã€‚</p>
<h3 id="3-é…ç½®-MySQL-æ•°æ®åº“çš„è¿æ¥æ–‡ä»¶"><a href="#3-é…ç½®-MySQL-æ•°æ®åº“çš„è¿æ¥æ–‡ä»¶" class="headerlink" title="3. é…ç½® MySQL æ•°æ®åº“çš„è¿æ¥æ–‡ä»¶"></a>3. é…ç½® MySQL æ•°æ®åº“çš„è¿æ¥æ–‡ä»¶</h3><ul>
<li><p>utils/DBHelper.js â€“&gt; è¿›è¡Œæ•°æ®åº“è¿æ¥çš„åŸºæœ¬é…ç½®</p>
</li>
<li><p>sqlMap.js â€“&gt; é…ç½® MySQL è¯­å¥ï¼Œæ ¹æ®å®é™…éœ€è¦æ¥é…ç½®</p>
</li>
</ul>
<p>é¦–å…ˆï¼Œ<code>DBHelper.js</code> é‡Œè®¾ç½®å¥½æ•°æ®åº“çš„è®¿é—®ç«¯å£ã€ç”¨æˆ·åã€å¯†ç ç­‰ä¿¡æ¯ï¼š</p>
<pre><code class="js">// connect to mysql
const mysql = require(&quot;mysql&quot;);

class DBHelper {
  // get connection
  getConn() {
    let conn = mysql.createConnection({
      // basic info (local DB)
      host: &quot;127.0.0.1&quot;, // IP address
      port: &quot;3306&quot;,
      user: &quot;xxx&quot;,
      password: &quot;xxx&quot;,
      database: &quot;databasename&quot;, // your DB name
    });
    conn.connect();
    return conn;
  }
}

module.exports = DBHelper;</code></pre>
<p>ç„¶åï¼Œ<code>sqlMap.js</code> é‡Œå†™å¥½ SQL è¯­å¥ï¼Œè¿™æ · Api å¯ä»¥ç›´æ¥è°ƒç”¨ï¼š</p>
<pre><code class="js">// sql query
var sqlMap = {
  songslist: {
    select: &#39;select * from songslist where artist like &quot;%&quot;?&quot;%&quot;&#39;,
  },
};

module.exports = sqlMap;</code></pre>
<p><code>%</code> è¡¨ç¤ºä»»æ„ 0 ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ï¼Œå¯åŒ¹é…ä»»æ„ç±»å‹å’Œé•¿åº¦çš„å­—ç¬¦ï¼Œå¦‚æœæ˜¯ä¸­æ–‡ï¼Œä½¿ç”¨ä¸¤ä¸ª <code>%</code> è¡¨ç¤ºï¼ˆ<code>%%</code>ï¼‰ã€‚</p>
<p>ä¸Šé¢è¯­å¥ä¸­çš„ <code>&quot;%&quot;?&quot;%&quot;</code>ï¼Œå¯åŒ¹é…ä»»æ„å­—ç¬¦ï¼Œå³ä½¿åªè¾“å…¥ä¸€ä¸ªå­—ç¬¦ï¼Œé€‚ç”¨äºåé¢éœ€è¦æŸ¥è¯¢çš„åŠ¨ä½œã€‚</p>
<h3 id="4-é…ç½®-Api-æ–‡ä»¶"><a href="#4-é…ç½®-Api-æ–‡ä»¶" class="headerlink" title="4. é…ç½® Api æ–‡ä»¶"></a>4. é…ç½® Api æ–‡ä»¶</h3><ul>
<li>api/userApi.js</li>
</ul>
<p>Api æ–‡ä»¶é‡Œæ˜¯å’Œæ•°æ®åº“è¿æ¥çš„å„ä¸ªåŠ¨ä½œçš„æ¥å£ã€‚</p>
<p><code>sqlMap.js</code> æ–‡ä»¶é‡Œï¼Œæˆ‘åªå†™äº†ä¸€ä¸ªæŸ¥è¯¢çš„åŠ¨ä½œï¼Œå› æ­¤ç›¸åº”çš„æ¥å£ä¹Ÿå°±æ˜¯ä¸€ä¸ªã€‚ï¼ˆå› ä¸ºæš‚æ—¶ä¸æ¶‰åŠåˆ°ç”¨æˆ·æ·»åŠ çš„åŠ¨ä½œï¼Œæš‚æ—¶ä¸è®°å½•è¿™éƒ¨åˆ†ï¼Œå¦‚æœåé¢éœ€è¦å†å¢åŠ ã€‚ï¼‰</p>
<pre><code class="js">const express = require(&quot;express&quot;);
const router = express.Router();

const DBHelper = require(&quot;../utils/DBHelper&quot;);
const sql = require(&quot;../sqlMap&quot;);

router.post(&quot;/selectSong&quot;, (req, res) =&gt; {
  // è·å– sql select è¯­å¥
  let sqlStr = sql.songslist.select;
  let params = req.body;
  let conn = new DBHelper().getConn();
  // query è·å–æ•°æ®
  conn.query(sqlStr, [params.artist], (err, result) =&gt; {
    if (err) {
      res.json(err);
    } else {
      res.json(result);
    }
  });
  conn.end();
});

module.exports = router;</code></pre>
<p>å¦‚æœæ˜¯å¤šä¸ª sql è¯­å¥ï¼Œå°±åˆ†åˆ«å†™å¤šä¸ª <code>query</code> è¯·æ±‚ï¼ŒæŠŠæ¯ä¸ªåŠ¨ä½œåˆ†å¼€ã€‚</p>
<h3 id="5-é…ç½®æœåŠ¡å™¨å…¥å£æ–‡ä»¶-index-js"><a href="#5-é…ç½®æœåŠ¡å™¨å…¥å£æ–‡ä»¶-index-js" class="headerlink" title="5. é…ç½®æœåŠ¡å™¨å…¥å£æ–‡ä»¶ index.js"></a>5. é…ç½®æœåŠ¡å™¨å…¥å£æ–‡ä»¶ index.js</h3><p><code>server</code> æ ¹ç›®å½•ä¸‹çš„ <code>index.js</code> æ–‡ä»¶ï¼Œæ˜¯åç«¯æœåŠ¡å™¨çš„å…¥å£æ–‡ä»¶ã€‚</p>
<p>åœ¨è¿™é‡Œè®¾ç½®åç«¯ Api è·¯ç”±ï¼Œä»¥åŠç›‘å¬çš„ç«¯å£ï¼š</p>
<pre><code class="js">// Node åç«¯ç«¯æœåŠ¡å™¨
const http = require(&quot;http&quot;);
const bodyParser = require(&quot;body-parser&quot;);
const express = require(&quot;express&quot;);
const userApi = require(&quot;./api/userApi&quot;); // Apiè·¯å¾„

let app = express();
let server = http.createServer(app);

app.use(bodyParser.json());
app.use(
  bodyParser.urlencoded({
    extended: false,
  })
);

// è§£å†³ Access-Control-Allow-Origin è·¨åŸŸé—®é¢˜
app.all(&quot;*&quot;, function (req, res, next) {
  res.header(&quot;Access-Control-Allow-Origin&quot;, &quot;*&quot;);
  res.header(&quot;Access-Control-Allow-Headers&quot;, &quot;X-Requested-With,Content-Type&quot;);
  res.header(&quot;Access-Control-Allow-Methods&quot;, &quot;PUT,POST,GET,DELETE,OPTIONS&quot;);
  next();
});

// åç«¯APIè·¯ç”±
app.use(&quot;/api/songslist&quot;, userApi);

// å¯åŠ¨ç›‘å¬
server.listen(8888, () =&gt; {
  console.log(&quot;Success! PORT: 8888&quot;);
});</code></pre>
<p>è®¾ç½®åç«¯æœåŠ¡å™¨çš„ç«¯å£ä¸º <code>8888</code>ã€‚</p>
<h3 id="6-å¯åŠ¨åç«¯æœåŠ¡å™¨"><a href="#6-å¯åŠ¨åç«¯æœåŠ¡å™¨" class="headerlink" title="6. å¯åŠ¨åç«¯æœåŠ¡å™¨"></a>6. å¯åŠ¨åç«¯æœåŠ¡å™¨</h3><ol>
<li>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹å®‰è£…ä¾èµ–ï¼š</li>
</ol>
<pre><code>npm install express mysql body-parser</code></pre><ol start="2">
<li>åœ¨ <code>server</code> æ–‡ä»¶å¤¹ä¸‹æ‰§è¡Œå‘½ä»¤ï¼Œå¯åŠ¨æœåŠ¡å™¨ï¼š</li>
</ol>
<pre><code>node index.js
or
node index</code></pre><p>æœåŠ¡å™¨å¯åŠ¨æˆåŠŸåï¼Œçœ‹åˆ°æç¤ºä¿¡æ¯ï¼Œè¯´æ˜å¯åŠ¨æˆåŠŸå•¦ï¼</p>
<p><img src="/img/start.png" srcset="/img/loading.gif" alt="å¯åŠ¨"></p>
<h2 id="Vue-å‰ç«¯ç®€å•æµ‹è¯•ï¼Œè·å–æ•°æ®"><a href="#Vue-å‰ç«¯ç®€å•æµ‹è¯•ï¼Œè·å–æ•°æ®" class="headerlink" title="Vue å‰ç«¯ç®€å•æµ‹è¯•ï¼Œè·å–æ•°æ®"></a>Vue å‰ç«¯ç®€å•æµ‹è¯•ï¼Œè·å–æ•°æ®</h2><h3 id="1-åŸºç¡€é¡µé¢"><a href="#1-åŸºç¡€é¡µé¢" class="headerlink" title="1. åŸºç¡€é¡µé¢"></a>1. åŸºç¡€é¡µé¢</h3><p>å› ä¸ºè¿™ä¸€æ­¥ä¸»è¦æµ‹è¯•èƒ½å¦æˆåŠŸä»æ•°æ®åº“è·å–æ•°æ®ï¼Œå‰ç«¯çš„é¡µé¢ç›´æ¥åœ¨ <code>HelloWorld.vue</code>ç»„å»ºä¸­ä¿®æ”¹ä¸€ä¸‹ã€‚</p>
<p>æ³¨å†Œä¸€ä¸ª <code>selectSong</code> ç‚¹å‡»äº‹ä»¶ï¼Œç”¨æˆ·è¾“å…¥çš„ä¿¡æ¯æ³¨å†Œä¸º <code>keywords</code>ï¼Œç‚¹å‡»æŒ‰é’®å³å¯æŸ¥è¯¢è¿”å›ç›¸åº”çš„ä¿¡æ¯ã€‚</p>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="js">&lt;template&gt;
  &lt;div class=&quot;hello&quot;&gt;
    &lt;h1&gt;{{ msg }}&lt;/h1&gt;
    &lt;form action=&quot;&quot;&gt;
      &lt;input type=&quot;text&quot; v-model=&quot;keywords&quot; placeholder=&quot;è¾“å…¥artist&quot; /&gt;
      &lt;button type=&quot;button&quot; @click=&quot;selectSong&quot;&gt;æŸ¥è¯¢&lt;/button&gt;
      &lt;h2&gt;{{ name }}&lt;/h2&gt;
    &lt;/form&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  name: &quot;HelloWorld&quot;,
  data() {
    return {
      msg: &quot;Welcome to Your Vue.js App&quot;,
      keywords: &quot;&quot;,
      name: &quot;&quot;,
    };
  },
  methods: {
    // select song event
    selectSong() {

        // è¾“å…¥ä¸º artist
      let artist = this.keywords;
      this.axios
        .post(&quot;/api/songslist/selectSong&quot;, {
          artist,
        })
        .then((res) =&gt; {
          let data = res.data[0];     // æµ‹è¯•åªå–ç¬¬ä¸€ç»„æ•°æ®
          // è¾“å‡ºartistå¯¹åº”çš„æ­Œæ›²åç§°
          this.name = data.song_name;
        })
        .catch((err) =&gt; {
          console.log(err);
        });
    },
  },
};
&lt;/script&gt;</code></pre>
<h3 id="2-vue-cli-å¼•å…¥-axios-ä»¥åŠè·¨åŸŸä½¿ç”¨"><a href="#2-vue-cli-å¼•å…¥-axios-ä»¥åŠè·¨åŸŸä½¿ç”¨" class="headerlink" title="2. vue-cli å¼•å…¥ axios ä»¥åŠè·¨åŸŸä½¿ç”¨"></a>2. vue-cli å¼•å…¥ axios ä»¥åŠè·¨åŸŸä½¿ç”¨</h3><p>ä»£ç ä¸­ä½¿ç”¨äº† axiosï¼Œé¦–å…ˆéœ€è¦å®‰è£…å¹¶å¼•å…¥ axiosã€‚</p>
<ol>
<li>åœ¨æ ¹ç›®å½•ä¸‹å®‰è£… <code>axios</code> å’Œ <code>vue-axios</code></li>
</ol>
<pre><code>npm install axios
npm install vue-axios</code></pre><ol start="2">
<li>åœ¨ <code>main.js</code> æ–‡ä»¶ä¸­å¯¼å…¥ <code>axios</code> å’Œ <code>vue-axios</code>ï¼Œå¹¶æ”¹å†™åŸå‹é“¾</li>
</ol>
<pre><code class="js">import axios from &quot;axios&quot;;
import VueAxios from &quot;vue-axios&quot;;

Vue.use(VueAxios, axios);

// æ”¹å†™åŸå‹é“¾
Vue.prototype.$axios = axios;</code></pre>
<p>è¿™æ ·ï¼Œ<code>axios</code> å°±å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†ï¼Œæ³¨æ„åœ¨ Vue ä»£ç ä¸­ï¼Œä½¿ç”¨ <code>axios</code> æ—¶å‰é¢è¦åŠ <code>this</code>ï¼š</p>
<pre><code>this.axios.post(&#39;&#39;, {})</code></pre><h3 id="3-å®¢æˆ·ç«¯ï¼ˆVue-å‰ç«¯ï¼‰å’Œåç«¯æœåŠ¡å™¨ä¹‹é—´çš„è·¨åŸŸé—®é¢˜"><a href="#3-å®¢æˆ·ç«¯ï¼ˆVue-å‰ç«¯ï¼‰å’Œåç«¯æœåŠ¡å™¨ä¹‹é—´çš„è·¨åŸŸé—®é¢˜" class="headerlink" title="3. å®¢æˆ·ç«¯ï¼ˆVue å‰ç«¯ï¼‰å’Œåç«¯æœåŠ¡å™¨ä¹‹é—´çš„è·¨åŸŸé—®é¢˜"></a>3. å®¢æˆ·ç«¯ï¼ˆVue å‰ç«¯ï¼‰å’Œåç«¯æœåŠ¡å™¨ä¹‹é—´çš„è·¨åŸŸé—®é¢˜</h3><p>è§£å†³äº† <code>axios</code> çš„å¼•ç”¨ï¼Œå¯åŠ¨å®¢æˆ·ç«¯ä¹‹åï¼Œå‘ç°æœ¬åœ°ä»£ç†çš„è·¨åŸŸé—®é¢˜ã€‚</p>
<p>åœ¨æœ¬åœ° localhost è®¿é—®æœ¬åœ°æœåŠ¡å™¨çš„åœ°å€<a href="http://127.0.0.1:8888/" target="_blank" rel="noopener">http://127.0.0.1:8888/</a>æ˜¯è¦è·¨åŸŸçš„ï¼Œæµè§ˆå™¨çš„å®‰å…¨ç­–ç•¥ï¼Œä¼šæŠ¥é”™ã€‚</p>
<p>éœ€è¦é…ç½®ä¸€ä¸‹ <code>config</code> æ–‡ä»¶å¤¹ä¸­çš„ <code>index.js</code> æ–‡ä»¶ï¼š<code>config/index.js --&gt; proxyTable</code></p>
<pre><code class="js">dev: {
    // åŠ å…¥ä»¥ä¸‹
    proxyTable: {
      &#39;/api&#39;: {
        target: &#39;http://127.0.0.1:8888/&#39;,//è®¾ç½®è°ƒç”¨çš„æ¥å£åŸŸåå’Œç«¯å£å· åˆ«å¿˜äº†åŠ http
        changeOrigin: true,//å¦‚æœéœ€è¦è·¨åŸŸ
        pathRewrite: {
          &#39;^/api&#39;: &#39;/api&#39;
        }
      }
    },</code></pre>
<h3 id="4-Access-Control-Allow-Origin-è·¨åŸŸé—®é¢˜"><a href="#4-Access-Control-Allow-Origin-è·¨åŸŸé—®é¢˜" class="headerlink" title="4. Access-Control-Allow-Origin è·¨åŸŸé—®é¢˜"></a>4. Access-Control-Allow-Origin è·¨åŸŸé—®é¢˜</h3><p>é™¤äº†æœ¬åœ°ä»£ç†è·¨åŸŸé—®é¢˜ï¼Œå¯åŠ¨å®¢æˆ·ç«¯æ—¶å‘ç°è¿˜äº§ç”Ÿäº† <code>Access-Control-Allow-Origin</code> è·¨åŸŸé—®é¢˜ã€‚</p>
<p>è¿™æ˜¯å› ä¸º <code>http</code> è¯·æ±‚å¤´éƒ¨æ²¡æœ‰é…ç½®å…è®¸è·¨åŸŸï¼Œéœ€è¦åœ¨åç«¯æœåŠ¡å™¨çš„ <code>index.js</code> æ–‡ä»¶é‡ŒåŠ å…¥å¦‚ä¸‹ä»£ç ï¼š</p>
<pre><code class="js">// è§£å†³ Access-Control-Allow-Origin è·¨åŸŸé—®é¢˜
app.all(&quot;*&quot;, function (req, res, next) {
  res.header(&quot;Access-Control-Allow-Origin&quot;, &quot;*&quot;);
  res.header(&quot;Access-Control-Allow-Headers&quot;, &quot;X-Requested-With,Content-Type&quot;);
  res.header(&quot;Access-Control-Allow-Methods&quot;, &quot;PUT,POST,GET,DELETE,OPTIONS&quot;);
  next();
});</code></pre>
<p>å¥½äº†ï¼Œé‡æ–°å¯åŠ¨æœåŠ¡å™¨ï¼Œç„¶åå¯åŠ¨å®¢æˆ·ç«¯ã€‚</p>
<p>è¾“å…¥ä¸€ä¸ªæ­Œæ‰‹çš„åå­—ï¼Œå¯ä»¥çœ‹åˆ°æŸ¥è¯¢çš„ç»“æœã€‚</p>
<p><strong>å‰åç«¯æœåŠ¡è¿æ¥æˆåŠŸï¼</strong></p>
<p><img src="/img/success.png" srcset="/img/loading.gif" alt="s"></p>
<p><strong>æ’’èŠ±ï¼</strong> ğŸ‰ğŸ‰ğŸ‰</p>
<hr>
<p><strong>å‚è€ƒæ¥æºï¼š</strong></p>
<ul>
<li><em><a href="https://blog.csdn.net/AiHuanhuan110/article/details/90674744" target="_blank" rel="noopener">ã€å…¨æ ˆåˆä½“éªŒã€‘Vue+Node+MySQL å®ç°å‰åç«¯åˆ†ç¦»å¼€å‘</a></em></li>
<li><em><a href="https://blog.csdn.net/weixin_42003850/article/details/100511566" target="_blank" rel="noopener">å®æˆ˜ vue+mySql é“¾æ¥æ•°æ®åº“å¹¶æ“ä½œ</a></em></li>
<li><em><a href="https://www.jianshu.com/p/27b37a8cd84b" target="_blank" rel="noopener">vue-cli å¼•å…¥ axios</a></em></li>
<li><em><a href="https://www.jianshu.com/p/e36956dc78b8" target="_blank" rel="noopener">vue-cli å¼•å…¥ axios åŠè·¨åŸŸä½¿ç”¨</a></em></li>
<li><em><a href="https://blog.csdn.net/sps900608/article/details/79599121" target="_blank" rel="noopener">ä½¿ç”¨ axios è§£å†³â€˜Access-Control-Allow-Originâ€™è·¨åŸŸ</a></em></li>
</ul>

            <hr>
          </div>
          <br>
          <div>
            <p>
            
              <span>
                <i class="iconfont icon-inbox"></i>
                
                  <a class="hover-with-bg" href="/categories/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91">åç«¯å¼€å‘</a>
                  &nbsp;
                
              </span>&nbsp;&nbsp;
            
            
              <span>
                <i class="iconfont icon-tag"></i>
                
                  <a class="hover-with-bg" href="/tags/Vue">Vue</a>
                
                  <a class="hover-with-bg" href="/tags/MySQL">MySQL</a>
                
                  <a class="hover-with-bg" href="/tags/Node-js">Node.js</a>
                
              </span>
            
            </p>
            
              <p class="note note-warning">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://zh.wikipedia.org/wiki/Wikipedia:CC_BY-SA_3.0%E5%8D%8F%E8%AE%AE%E6%96%87%E6%9C%AC" target="_blank" rel="nofollow noopener noopener">CC BY-SA 3.0åè®®</a> ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼</p>
            
          </div>
        </div>
      </div>
    </div>
    <div class="d-none d-lg-block col-lg-2 toc-container">
      
  <div id="toc">
    <p class="h4"><i class="far fa-list-alt"></i>&nbsp;TOC</p>
    <div id="tocbot"></div>
  </div>

    </div>
  </div>
</div>

<!-- custom -->


<!-- Comments -->
<div class="col-lg-7 mx-auto nopadding-md">
  <div class="container comments mx-auto" id="comments">
    
  </div>
</div>

    
  </main>

  
    <a class="z-depth-1" id="scroll-top-button" href="#" role="button">
      <i class="fa fa-chevron-up scroll-top-arrow" aria-hidden="true"></i>
    </a>
  

  
    <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
  

  <footer class="mt-5">
  <div class="text-center py-3">
    <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><b>Hexo</b></a>
    <i class="iconfont icon-love"></i>
    <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"> <b>Fluid</b></a>
    <br>

    
  
    <!-- ä¸è’œå­ç»Ÿè®¡PV -->
    
    &nbsp;<span id="busuanzi_container_site_pv">æ€»è®¿é—®é‡ 
          <span id="busuanzi_value_site_pv"></span> æ¬¡</span>&nbsp;
  
  
    <!-- ä¸è’œå­ç»Ÿè®¡UV -->
    
    &nbsp;<span id="busuanzi_container_site_uv">æ€»è®¿å®¢æ•° 
            <span id="busuanzi_value_site_uv"></span> äºº</span>&nbsp;
  
  <br>



    


    <!-- cnzz Analytics icon -->
    

  </div>
</footer>

<!-- SCRIPTS -->
<script src="/lib/jquery/jquery.min.js" ></script>
<script src="/lib/popper/popper.min.js" ></script>
<script src="/lib/bootstrap/js/bootstrap.min.js" ></script>
<script src="/lib/mdbootstrap/js/mdb.min.js" ></script>
<script src="/js/main.js" ></script>


  <script src="/js/lazyload.js" ></script>



  
    <script src="/lib/tocbot/tocbot.min.js" ></script>
  
  <script src="/js/post.js" ></script>



  <script src="/lib/smooth-scroll/smooth-scroll.min.js" ></script>



  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>


<!-- Plugins -->


  
    <!-- Baidu Analytics -->
    <script>
      var _hmt = _hmt || [];
      (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?e7e697d38c5a814b00fe553d27f81508";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
      })();
    </script>
  

  

  

  

  <!-- cnzz Analytics -->
  



  <script src="/lib/prettify/prettify.min.js" ></script>
  <script>
    $(document).ready(function () {
      $('pre').addClass('prettyprint  linenums');
      prettyPrint();
    })
  </script>



  <script src="/lib/typed/typed.min.js" ></script>
  <script>
    var typed = new Typed('#subtitle', {
      strings: [
        '  ',
        "ã€æ­Œå•æ¨èã€‘Node.js + Express æ­å»ºåç«¯æœåŠ¡å™¨&nbsp;",
      ],
      cursorChar: "_",
      typeSpeed: 70,
      loop: false,
    });
    typed.stop();
    $(document).ready(function () {
      $(".typed-cursor").addClass("h2");
      typed.start();
    });
  </script>



  <script src="/lib/anchor/anchor.min.js" ></script>
  <script>
    anchors.options = {
      placement: "right",
      visible: "false",
      
    };
    var el = "h1,h2,h3,h4,h5,h6".split(",");
    var res = [];
    for (item of el) {
      res.push(".markdown-body > " + item)
    }
    anchors.add(res.join(", "))
  </script>



  <script src="/js/local-search.js" ></script>
  <script>
    var path = "/local-search.xml";
    var inputArea = document.querySelector("#local-search-input");
    inputArea.onclick = function () {
      getSearchFile(path);
      this.onclick = null
    }
  </script>



  <script src="/lib/fancybox/jquery.fancybox.min.js" ></script>
  <script>
    $("#post img:not(.no-zoom img, img[no-zoom])").each(
      function () {
        var element = document.createElement("a");
        $(element).attr("data-fancybox", "images");
        $(element).attr("href", $(this).attr("src"));
        $(this).wrap(element);
      }
    );
  </script>











</body>
</html>
